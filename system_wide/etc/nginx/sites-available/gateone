### GateOne ### {{{
# HTTPS server
server {
	listen       [::]:443;
	listen       443;
	server_name  mysslhost;

	ssl                  on;
	ssl_certificate      /srv/ssl/nginx.pem;
	ssl_certificate_key  /srv/ssl/nginx.key;
	ssl_session_timeout  5m;
	ssl_protocols  SSLv2 SSLv3 TLSv1;
	ssl_ciphers  HIGH:!aNULL:!MD5;
	ssl_prefer_server_ciphers   on;

	location /go/ {
		#auth_basic "Restricted";					#One extra layer of authentication
		#auth_basic_user_file /etc/nginx/.htpasswd;
		proxy_pass_header Server;
		proxy_set_header Host $http_host;
		proxy_redirect off;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Scheme $scheme;
		proxy_pass http://localhost:8888;
		proxy_http_version 1.1;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection "upgrade";
	}
	location /other {
		rewrite /other/(.*) /$1 break;
		#include /etc/nginx/proxy.conf;
		proxy_pass http://10.1.1.200:80;
		break;
	}

	## force other pages back to HTTP
	location / {
		rewrite ^ http://$http_host$request_uri? permanent;
	}
}
### End GateOne ### }}}
